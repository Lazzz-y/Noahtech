import{_ as t}from"./chunks/ArticleMetadata.Ba4icgGF.js";import{_ as p,m as e,a as F,u as r,B as d,e as n,x as g,ah as C,o as h,p as y,q as D}from"./chunks/framework.Bi-mNMmX.js";import"./chunks/theme.--nR5Zd2.js";const q=JSON.parse('{"title":"Rediså“¨å…µæ¨¡å¼","description":"","frontmatter":{"title":"Rediså“¨å…µæ¨¡å¼","author":"Noah","date":"2024/07/10 14:39","categories":["Redisè¿›é˜¶"],"tags":["Redis","Redisè¿›é˜¶"]},"headers":[],"relativePath":"courses/æ•°æ®åº“/04-Redisè¿›é˜¶/06-Rediså“¨å…µæ¨¡å¼.md","filePath":"courses/æ•°æ®åº“/04-Redisè¿›é˜¶/06-Rediså“¨å…µæ¨¡å¼.md","lastUpdated":1720612269000}'),o={name:"courses/æ•°æ®åº“/04-Redisè¿›é˜¶/06-Rediså“¨å…µæ¨¡å¼.md"},c=n("h1",{id:"rediså“¨å…µæ¨¡å¼",tabindex:"-1"},[g("Rediså“¨å…µæ¨¡å¼ "),n("a",{class:"header-anchor",href:"#rediså“¨å…µæ¨¡å¼","aria-label":'Permalink to "Rediså“¨å…µæ¨¡å¼"'},"â€‹")],-1),B=C(`<nav class="table-of-contents"><ul><li><a href="#å“¨å…µæ¨¡å¼æ¦‚è¿°">å“¨å…µæ¨¡å¼æ¦‚è¿°</a><ul><li><a href="#ä½œç”¨">ä½œç”¨</a></li><li><a href="#ä»€ä¹ˆæ˜¯å“¨å…µæ¨¡å¼">ä»€ä¹ˆæ˜¯å“¨å…µæ¨¡å¼</a></li><li><a href="#å“¨å…µæ¨¡å¼å·¥ä½œåŸç†">å“¨å…µæ¨¡å¼å·¥ä½œåŸç†</a></li><li><a href="#å“¨å…µçš„åŠŸèƒ½">å“¨å…µçš„åŠŸèƒ½</a></li></ul></li><li><a href="#å•å“¨å…µæ¨¡å¼">å•å“¨å…µæ¨¡å¼</a><ul><li><a href="#_1-åˆ›å»ºsentinel-conf">1.åˆ›å»ºsentinel.conf</a></li><li><a href="#_2-ä¿®æ”¹sentinel-conf">2.ä¿®æ”¹sentinel.conf</a></li><li><a href="#_3-å¯åŠ¨å“¨å…µ">3.å¯åŠ¨å“¨å…µ</a></li><li><a href="#_5-æµ‹è¯•å“¨å…µ">5.æµ‹è¯•å“¨å…µ</a></li></ul></li></ul></nav><details class="details custom-block"><summary>å“¨å…µæ¨¡å¼é‡è¦é…ç½®</summary><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># Example sentinel.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># å“¨å…µsentinelå®ä¾‹è¿è¡Œçš„ç«¯å£ é»˜è®¤26379</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">port</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 26379</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># å“¨å…µsentinelçš„å·¥ä½œç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">dir</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /tmp</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># å“¨å…µsentinelç›‘æ§çš„redisä¸»èŠ‚ç‚¹çš„ ip port</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># master-name å¯ä»¥è‡ªå·±å‘½åçš„ä¸»èŠ‚ç‚¹åå­— åªèƒ½ç”±å­—æ¯A-zã€æ•°å­—0-9 ã€è¿™ä¸‰ä¸ªå­—ç¬¦&quot;.-_&quot;ç»„æˆã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># quorum é…ç½®å¤šå°‘ä¸ªsentinelå“¨å…µç»Ÿä¸€è®¤ä¸ºmasterä¸»èŠ‚ç‚¹å¤±è” é‚£ä¹ˆè¿™æ—¶å®¢è§‚ä¸Šè®¤ä¸ºä¸»èŠ‚ç‚¹å¤±è”äº†</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># sentinel monitor &lt;master-name&gt; &lt;ip&gt; &lt;redis-port&gt; &lt;quorum&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sentinel</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> monitor</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mymaster</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6379</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># å½“åœ¨Rediså®ä¾‹ä¸­å¼€å¯äº†requirepass foobared æˆæƒå¯†ç  è¿™æ ·æ‰€æœ‰è¿æ¥Rediså®ä¾‹çš„å®¢æˆ·ç«¯éƒ½è¦æä¾›å¯†ç </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># è®¾ç½®å“¨å…µsentinel è¿æ¥ä¸»ä»çš„å¯†ç  æ³¨æ„å¿…é¡»ä¸ºä¸»ä»è®¾ç½®ä¸€æ ·çš„éªŒè¯å¯†ç </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># sentinel auth-pass &lt;master-name&gt; &lt;password&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sentinel</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> auth-pass</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mymaster</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> MySUPER--secret-0123passw0rd</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># æŒ‡å®šå¤šå°‘æ¯«ç§’ä¹‹å ä¸»èŠ‚ç‚¹æ²¡æœ‰åº”ç­”å“¨å…µsentinel æ­¤æ—¶ å“¨å…µä¸»è§‚ä¸Šè®¤ä¸ºä¸»èŠ‚ç‚¹ä¸‹çº¿ é»˜è®¤30ç§’</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># sentinel down-after-milliseconds &lt;master-name&gt; &lt;milliseconds&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sentinel</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> down-after-milliseconds</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mymaster</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 30000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># è¿™ä¸ªé…ç½®é¡¹æŒ‡å®šäº†åœ¨å‘ç”Ÿfailoverä¸»å¤‡åˆ‡æ¢æ—¶æœ€å¤šå¯ä»¥æœ‰å¤šå°‘ä¸ªslaveåŒæ—¶å¯¹æ–°çš„masterè¿›è¡Œ åŒæ­¥ï¼Œ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">è¿™ä¸ªæ•°å­—è¶Šå°ï¼Œå®Œæˆfailoveræ‰€éœ€çš„æ—¶é—´å°±è¶Šé•¿ï¼Œ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">ä½†æ˜¯å¦‚æœè¿™ä¸ªæ•°å­—è¶Šå¤§ï¼Œå°±æ„å‘³ç€è¶Š</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> å¤šçš„slaveå› ä¸ºreplicationè€Œä¸å¯ç”¨ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">å¯ä»¥é€šè¿‡å°†è¿™ä¸ªå€¼è®¾ä¸º</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> æ¥ä¿è¯æ¯æ¬¡åªæœ‰ä¸€ä¸ªslave</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> å¤„äºä¸èƒ½å¤„ç†å‘½ä»¤è¯·æ±‚çš„çŠ¶æ€ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># sentinel parallel-syncs &lt;master-name&gt; &lt;numslaves&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sentinel</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> parallel-syncs</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mymaster</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># æ•…éšœè½¬ç§»çš„è¶…æ—¶æ—¶é—´ failover-timeout å¯ä»¥ç”¨åœ¨ä»¥ä¸‹è¿™äº›æ–¹é¢ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#1. åŒä¸€ä¸ªsentinelå¯¹åŒä¸€ä¸ªmasterä¸¤æ¬¡failoverä¹‹é—´çš„é—´éš”æ—¶é—´ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#2. å½“ä¸€ä¸ªslaveä»ä¸€ä¸ªé”™è¯¯çš„masteré‚£é‡ŒåŒæ­¥æ•°æ®å¼€å§‹è®¡ç®—æ—¶é—´ã€‚ç›´åˆ°slaveè¢«çº æ­£ä¸ºå‘æ­£ç¡®çš„masteré‚£é‡ŒåŒæ­¥æ•°æ®æ—¶ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#3.å½“æƒ³è¦å–æ¶ˆä¸€ä¸ªæ­£åœ¨è¿›è¡Œçš„failoveræ‰€éœ€è¦çš„æ—¶é—´ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#4.å½“è¿›è¡Œfailoveræ—¶ï¼Œé…ç½®æ‰€æœ‰slavesæŒ‡å‘æ–°çš„masteræ‰€éœ€çš„æœ€å¤§æ—¶é—´ã€‚ä¸è¿‡ï¼Œå³ä½¿è¿‡äº†è¿™ä¸ªè¶…æ—¶ï¼Œslavesä¾ç„¶ä¼šè¢«æ­£ç¡®é…ç½®ä¸ºæŒ‡å‘masterï¼Œä½†æ˜¯å°±ä¸æŒ‰parallel-syncsæ‰€é…ç½®çš„è§„åˆ™æ¥äº†</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># é»˜è®¤ä¸‰åˆ†é’Ÿ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># sentinel failover-timeout &lt;master-name&gt; &lt;milliseconds&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sentinel</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> failover-timeout</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mymaster</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 180000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># SCRIPTS EXECUTION</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#é…ç½®å½“æŸä¸€äº‹ä»¶å‘ç”Ÿæ—¶æ‰€éœ€è¦æ‰§è¡Œçš„è„šæœ¬ï¼Œå¯ä»¥é€šè¿‡è„šæœ¬æ¥é€šçŸ¥ç®¡ç†å‘˜ï¼Œä¾‹å¦‚å½“ç³»ç»Ÿè¿è¡Œä¸æ­£å¸¸æ—¶å‘é‚®ä»¶é€šçŸ¥ç›¸å…³äººå‘˜ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#å¯¹äºè„šæœ¬çš„è¿è¡Œç»“æœæœ‰ä»¥ä¸‹è§„åˆ™ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#è‹¥è„šæœ¬æ‰§è¡Œåè¿”å›1ï¼Œé‚£ä¹ˆè¯¥è„šæœ¬ç¨åå°†ä¼šè¢«å†æ¬¡æ‰§è¡Œï¼Œé‡å¤æ¬¡æ•°ç›®å‰é»˜è®¤ä¸º10</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#è‹¥è„šæœ¬æ‰§è¡Œåè¿”å›2ï¼Œæˆ–è€…æ¯”2æ›´é«˜çš„ä¸€ä¸ªè¿”å›å€¼ï¼Œè„šæœ¬å°†ä¸ä¼šé‡å¤æ‰§è¡Œã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#å¦‚æœè„šæœ¬åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ç”±äºæ”¶åˆ°ç³»ç»Ÿä¸­æ–­ä¿¡å·è¢«ç»ˆæ­¢äº†ï¼Œåˆ™åŒè¿”å›å€¼ä¸º1æ—¶çš„è¡Œä¸ºç›¸åŒã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#ä¸€ä¸ªè„šæœ¬çš„æœ€å¤§æ‰§è¡Œæ—¶é—´ä¸º60sï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œè„šæœ¬å°†ä¼šè¢«ä¸€ä¸ªSIGKILLä¿¡å·ç»ˆæ­¢ï¼Œä¹‹åé‡æ–°æ‰§è¡Œã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#é€šçŸ¥å‹è„šæœ¬:å½“sentinelæœ‰ä»»ä½•è­¦å‘Šçº§åˆ«çš„äº‹ä»¶å‘ç”Ÿæ—¶ï¼ˆæ¯”å¦‚è¯´rediså®ä¾‹çš„ä¸»è§‚å¤±æ•ˆå’Œå®¢è§‚å¤±æ•ˆç­‰ç­‰ï¼‰ï¼Œå°†ä¼šå»è°ƒç”¨è¿™ä¸ªè„šæœ¬ï¼Œè¿™æ—¶è¿™ä¸ªè„šæœ¬åº”è¯¥é€šè¿‡é‚®ä»¶ï¼ŒSMSç­‰æ–¹å¼å»é€šçŸ¥ç³»ç»Ÿç®¡ç†å‘˜å…³äºç³»ç»Ÿä¸æ­£å¸¸è¿è¡Œçš„ä¿¡æ¯ã€‚è°ƒç”¨è¯¥è„šæœ¬æ—¶ï¼Œå°†ä¼ ç»™è„šæœ¬ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯äº‹ä»¶çš„ç±»å‹ï¼Œä¸€ä¸ªæ˜¯äº‹ä»¶çš„æè¿°ã€‚å¦‚æœsentinel.confé…ç½®æ–‡ä»¶ä¸­é…ç½®äº†è¿™ä¸ªè„šæœ¬è·¯å¾„ï¼Œé‚£ä¹ˆå¿…é¡»ä¿è¯è¿™ä¸ªè„šæœ¬å­˜åœ¨äºè¿™ä¸ªè·¯å¾„ï¼Œå¹¶ä¸”æ˜¯å¯æ‰§è¡Œçš„ï¼Œå¦åˆ™sentinelæ— æ³•æ­£å¸¸å¯åŠ¨æˆåŠŸã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">#é€šçŸ¥è„šæœ¬</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># shellç¼–ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># sentinel notification-script &lt;master-name&gt; &lt;script-path&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sentinel</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> notification-script</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mymaster</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /var/redis/notify.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># å®¢æˆ·ç«¯é‡æ–°é…ç½®ä¸»èŠ‚ç‚¹å‚æ•°è„šæœ¬</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># å½“ä¸€ä¸ªmasterç”±äºfailoverè€Œå‘ç”Ÿæ”¹å˜æ—¶ï¼Œè¿™ä¸ªè„šæœ¬å°†ä¼šè¢«è°ƒç”¨ï¼Œé€šçŸ¥ç›¸å…³çš„å®¢æˆ·ç«¯å…³äºmasteråœ°å€å·²ç»å‘ç”Ÿæ”¹å˜çš„ä¿¡æ¯ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># ä»¥ä¸‹å‚æ•°å°†ä¼šåœ¨è°ƒç”¨è„šæœ¬æ—¶ä¼ ç»™è„šæœ¬:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># &lt;master-name&gt; &lt;role&gt; &lt;state&gt; &lt;from-ip&gt; &lt;from-port&gt; &lt;to-ip&gt; &lt;to-port&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># ç›®å‰&lt;state&gt;æ€»æ˜¯â€œfailoverâ€,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># &lt;role&gt;æ˜¯â€œleaderâ€æˆ–è€…â€œobserverâ€ä¸­çš„ä¸€ä¸ªã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># å‚æ•° from-ip, from-port, to-ip, to-portæ˜¯ç”¨æ¥å’Œæ—§çš„masterå’Œæ–°çš„master(å³æ—§çš„slave)é€šä¿¡çš„</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># è¿™ä¸ªè„šæœ¬åº”è¯¥æ˜¯é€šç”¨çš„ï¼Œèƒ½è¢«å¤šæ¬¡è°ƒç”¨ï¼Œä¸æ˜¯é’ˆå¯¹æ€§çš„ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># sentinel client-reconfig-script &lt;master-name&gt; &lt;script-path&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sentinel</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> client-reconfig-script</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mymaster</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /var/redis/reconfig.sh</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # ä¸€èˆ¬éƒ½æ˜¯ç”±è¿ç»´æ¥é…ç½®ï¼</span></span></code></pre></div></details><h2 id="å“¨å…µæ¨¡å¼æ¦‚è¿°" tabindex="-1">å“¨å…µæ¨¡å¼æ¦‚è¿° <a class="header-anchor" href="#å“¨å…µæ¨¡å¼æ¦‚è¿°" aria-label="Permalink to &quot;å“¨å…µæ¨¡å¼æ¦‚è¿°&quot;">â€‹</a></h2><p>å“¨å…µæ¨¡å¼æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¯ä»¥åœ¨ä¸€ä¸ªæ¶æ„ä¸­è¿è¡Œå¤šä¸ªå“¨å…µè¿›ç¨‹ï¼Œè¿™äº›è¿›ç¨‹ä½¿ç”¨æµè¨€åè®®æ¥æ¥æ”¶å…³äº Master ä¸»æœåŠ¡å™¨æ˜¯å¦ä¸‹çº¿çš„ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨æŠ•ç¥¨åè®®æ¥å†³å®šæ˜¯å¦æ‰§è¡Œè‡ªåŠ¨æ•…éšœè½¬ç§»ï¼Œä»¥åŠé€‰æ‹©å“ªä¸ª Slave ä½œä¸ºæ–°çš„ Masterã€‚</p><h3 id="ä½œç”¨" tabindex="-1">ä½œç”¨ <a class="header-anchor" href="#ä½œç”¨" aria-label="Permalink to &quot;ä½œç”¨&quot;">â€‹</a></h3><p>åœ¨æ²¡æœ‰å“¨å…µæ¨¡å¼ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸»æœåŠ¡å™¨å‡ºç°å®•æœºæƒ…å†µæ—¶ï¼ŒRedis éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»å¹²é¢„ä¸»ä»æ¨¡å¼çš„åˆ‡æ¢ã€‚ç„¶è€Œäººå·¥å¹²é¢„çš„æ“ä½œè´¹äº‹è´¹åŠ›ï¼Œè¿˜ä¼šé€ æˆä¸€æ®µæ—¶é—´æœåŠ¡ä¸èƒ½ä½¿ç”¨ï¼›æœ‰äº†å“¨å…µæ¨¡å¼ä¹‹åï¼Œä¸»ä»æ¨¡å¼çš„åˆ‡æ¢ä¸éœ€è¦æˆ‘ä»¬äººå·¥å¹²é¢„ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯å“¨å…µæ¨¡å¼" tabindex="-1">ä»€ä¹ˆæ˜¯å“¨å…µæ¨¡å¼ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯å“¨å…µæ¨¡å¼" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯å“¨å…µæ¨¡å¼&quot;">â€‹</a></h3><p>å“¨å…µæ¨¡å¼æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œå®ƒå¯¹ Redis çš„ç³»ç»Ÿè¿è¡ŒçŠ¶æ€è¿›è¡Œç›‘æ§ï¼Œæœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼š</p><ol><li>é€šè¿‡å‘é€å‘½ä»¤ï¼Œè®© Redis æœåŠ¡å™¨è¿”å›ç›‘æ§å…¶è¿è¡ŒçŠ¶æ€ï¼Œå³ç›‘æ§ä¸»æœºå’Œä»æœº Redis æ˜¯å¦è¿è¡Œæ­£å¸¸ã€‚</li><li>å½“å“¨å…µæ£€æµ‹åˆ°ä¸»æœºå®•æœºï¼Œä¼šè‡ªåŠ¨å°† slave åˆ‡æ¢æˆ master ï¼Œç„¶åé€šè¿‡å‘å¸ƒè®¢é˜…æ¨¡å¼é€šçŸ¥å…¶ä»–çš„ä»æœåŠ¡å™¨ï¼Œä¿®æ”¹é…ç½®ï¼Œè®©ä»–ä»¬åˆ‡æ¢masterã€‚</li></ol><h3 id="å“¨å…µæ¨¡å¼å·¥ä½œåŸç†" tabindex="-1">å“¨å…µæ¨¡å¼å·¥ä½œåŸç† <a class="header-anchor" href="#å“¨å…µæ¨¡å¼å·¥ä½œåŸç†" aria-label="Permalink to &quot;å“¨å…µæ¨¡å¼å·¥ä½œåŸç†&quot;">â€‹</a></h3><p>å•å“¨å…µå·¥ä½œåŸç†ï¼š</p><img src="https://raw.githubusercontent.com/Noah2Y/img/main/blog/20240710150541.jpg" style="zoom:80%;"><p>å•ä¸ªå“¨å…µï¼Œç”±ä¸€ä¸ªå“¨å…µç›‘æ§å¤šä¸ª Redis æœåŠ¡ã€‚</p><p>::: tips TIPSğŸ¤”</p><p>è®¾æƒ³: å“¨å…µä½œä¸ºå•ç‹¬çš„ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸”åœ¨å•å“¨å…µç¯å¢ƒä¸‹ï¼Œå¦‚æœå“¨å…µæœåŠ¡å‡ºç°å®•æœºï¼Œé‚£è¯¥å¦‚ä½•åº”å¯¹ï¼Ÿ</p><p>:::</p><p>å¤šå“¨å…µå·¥ä½œåŸç†ï¼š</p><img src="https://raw.githubusercontent.com/Noah2Y/img/main/blog/20240710153346.jpg" style="zoom:80%;"><p>å‡è®¾ Master å®•æœºï¼Œå“¨å…µ01å…ˆæ£€æµ‹åˆ°ç»“æœï¼Œç³»ç»Ÿå¹¶ä¸ä¼šé©¬ä¸Šè¿›è¡Œæ•…éšœè½¬ç§»(failover)ï¼Œä»…ä»…æ˜¯å“¨å…µ01ä¸»è§‚çš„è®¤ä¸º Master ä¸å¯ç”¨ï¼Œè¿™ä¸ªç°è±¡ç§°ä¸º<strong>ä¸»è§‚ä¸‹çº¿</strong>ã€‚å½“å…¶ä»–å“¨å…µä¹Ÿæ£€æµ‹åˆ° Master ä¸å¯ç”¨ï¼Œå¹¶ä¸”æ•°é‡è¾¾åˆ°ä¸€å®šå€¼æ—¶ï¼Œé‚£ä¹ˆå“¨å…µä¹‹é—´ä¼šè¿›è¡Œä¸€æ¬¡æŠ•ç¥¨ï¼ŒæŠ•ç¥¨çš„ç»“æœç”±ä¸€ä¸ªå“¨å…µå‘èµ·ï¼Œè¿›è¡Œ failover æ“ä½œã€‚åˆ‡æ¢æˆåŠŸåï¼Œå°±ä¼šé€šè¿‡å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œè®©å„ä¸ªå“¨å…µæŠŠè‡ªå·±ç›‘æ§çš„ Slave å®ç°åˆ‡æ¢ä¸»æœºï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º<strong>å®¢è§‚ä¸‹çº¿</strong>ã€‚</p><h3 id="å“¨å…µçš„åŠŸèƒ½" tabindex="-1">å“¨å…µçš„åŠŸèƒ½ <a class="header-anchor" href="#å“¨å…µçš„åŠŸèƒ½" aria-label="Permalink to &quot;å“¨å…µçš„åŠŸèƒ½&quot;">â€‹</a></h3><ul><li><strong>é›†ç¾¤ç›‘æ§:</strong> è´Ÿè´£ç›‘æ§ä¸»ä»é›†ç¾¤ä¸­çš„ Master å’Œ Slave è¿›ç¨‹æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</li><li><strong>æ•…éšœè½¬ç§»(failover):</strong> å¦‚æœ Master å®•æœºï¼Œä¼šè‡ªåŠ¨ä» Slave ä¸­é€‰ä¸¾å‡ºæ–°çš„ Master ï¼Œè¿›è¡Œä¸»ä»åˆ‡æ¢ã€‚</li><li><strong>é…ç½®ä¸­å¿ƒ:</strong> å¦‚æœå‘ç”Ÿæ•…éšœè½¬ç§»ï¼ŒSentinel è´Ÿè´£é€šçŸ¥å®¢æˆ·ç«¯æ–°çš„ Master çš„åœ°å€ã€‚</li><li><strong>æ¶ˆæ¯é€šçŸ¥:</strong> å¦‚æœæŸä¸ªèŠ‚ç‚¹æœ‰æ•…éšœï¼Œé‚£ä¹ˆ Sentinel ä¼šå‘é€æŠ¥è­¦æ¶ˆæ¯ç»™ç³»ç»Ÿç®¡ç†å‘˜ã€‚</li></ul><div class="warning custom-block"><p class="custom-block-title">æ³¨æ„ğŸš¨</p><p>å¦‚æœåœ¨æ•…éšœè½¬ç§»æ“ä½œå®Œæˆï¼Œé€‰ä¸¾å‡ºæ¥æ–°çš„ Master ä¹‹åï¼ŒåŸ Master ä»å®•æœºçŠ¶æ€æ¢å¤ï¼Œåˆ™æ˜¯ä»¥ä»æœºçš„çŠ¶æ€è®¤ä¸»æ–°çš„ Masterã€‚</p></div><h2 id="å•å“¨å…µæ¨¡å¼" tabindex="-1">å•å“¨å…µæ¨¡å¼ <a class="header-anchor" href="#å•å“¨å…µæ¨¡å¼" aria-label="Permalink to &quot;å•å“¨å…µæ¨¡å¼&quot;">â€‹</a></h2><div class="info custom-block"><p class="custom-block-title">ç¯å¢ƒğŸ‘½</p><p>å½“å‰ç¯å¢ƒä¸ºä¸€ä¸»äºŒä»çš„ä¼ªé›†ç¾¤ï¼Œå…¶ä¸­ç«¯å£6001ä¸ºä¸»æœºï¼Œ6002ã€6003ä¸ºä»æœºã€‚</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">127.0.0.1:6001</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">info</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> replication</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># Replication</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">role:master</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">connected_slaves:2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">slave0:ip</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">=127.0.0.1,port=6002,state=online,offset=16688,lag=1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">slave1:ip</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">=127.0.0.1,port=6003,state=online,offset=16688,lag=0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">master_failover_state:no-failover</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">master_replid:0ff3808faa9869d0d2dddd5c58d39a029026107e</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">master_replid2:9b3a6e7e6d22a17a2f6e20efb0c6448d635eb777</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">master_repl_offset:16688</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">second_repl_offset:16661</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">repl_backlog_active:1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">repl_backlog_size:1048576</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">repl_backlog_first_byte_offset:16661</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">repl_backlog_histlen:28</span></span></code></pre></div></div><h3 id="_1-åˆ›å»ºsentinel-conf" tabindex="-1">1.åˆ›å»ºsentinel.conf <a class="header-anchor" href="#_1-åˆ›å»ºsentinel-conf" aria-label="Permalink to &quot;1.åˆ›å»ºsentinel.conf&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œå¤åˆ¶ Redis æ ¹ç›®å½•ä¸‹çš„ sentinel.conf</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># åŸ sentinel.conf ç•™ä½œå¤‡ä»½</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sentinel.conf</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  sentinel/sentinel.conf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sentinel/</span></span></code></pre></div><h3 id="_2-ä¿®æ”¹sentinel-conf" tabindex="-1">2.ä¿®æ”¹sentinel.conf <a class="header-anchor" href="#_2-ä¿®æ”¹sentinel-conf" aria-label="Permalink to &quot;2.ä¿®æ”¹sentinel.conf&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># sentinel monitor åç§° host port quorum</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sentinel</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> monitor</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> myredis</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6001</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span></span></code></pre></div><p>quorum è¡¨ç¤ºè‡³å°‘æœ‰ quorum ä¸ªå“¨å…µè®¤ä¸ºä¸»æœºå®•æœºï¼Œè¯¥ä¸»æœºæ‰ä¼šè¢«åˆ¤æ–­ä¸ºå®•æœºã€‚</p><h3 id="_3-å¯åŠ¨å“¨å…µ" tabindex="-1">3.å¯åŠ¨å“¨å…µ <a class="header-anchor" href="#_3-å¯åŠ¨å“¨å…µ" aria-label="Permalink to &quot;3.å¯åŠ¨å“¨å…µ&quot;">â€‹</a></h3><p>è¿è¡Œ redisç›®å½•ä¸‹çš„ redis-sentinel å¹¶æŒ‡å®šä¸Šé¢ä¿®æ”¹çš„é…ç½®æ–‡ä»¶å³å¯ï¼Œé»˜è®¤ç«¯å£ä¸º26379</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@localhost redis-7.2.5]# bin/redis-sentinel sentinel/sentinel.conf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8621:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:12:32.681</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # WARNING Memory overcommit must be enabled! Without it, a background save or replication may fail under low memory condition. Being disabled, it can also cause failures without low memory condition, see https://github.com/jemalloc/jemalloc/issues/1328. To fix this issue add &#39;vm.overcommit_memory = 1&#39; to /etc/sysctl.conf and then reboot or run the command &#39;sysctl vm.overcommit_memory=1&#39; for this to take effect.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8621:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:12:32.681</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> oO0OoO0OoO0Oo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Redis</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> starting</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> oO0OoO0OoO0Oo</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8621:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:12:32.681</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Redis</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> version=7.2.5,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bits=64,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> commit=00000000,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> modified=0,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pid=8621,</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> just</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> started</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8621:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:12:32.681</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Configuration</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> loaded</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8621:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:12:32.682</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Increased</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> maximum</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> number</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> open</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> files</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10032</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (it </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">was</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> originally</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1024</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">).</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8621:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:12:32.682</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> monotonic</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> clock:</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> POSIX</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> clock_gettime</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">                _._</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">           _.-</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">__</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;&#39;-._</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">      _.-</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`\`</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    \`</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">_.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  &#39;&#39;-._</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">           Redis</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 7.2.5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (00000000/0) 64 bit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  .-</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> .-</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`\`\`</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">.</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  \`\`\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">\\/</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    _.,_</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;&#39;-._</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (    </span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;      ,       .-\`  | \`,    )     Running in sentinel mode</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> |\`-._\`-...-\` __...-.\`\`-._|&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\` </span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">_.-&#39;|     Port: 26379</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> |    \`-._   \`._    /     _.-&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">     PID:</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 8621</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-._</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-._</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-./</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  _.-&#39;    _.-&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-._</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-._</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-.__.-&#39;    _.-&#39;_.-&#39;|</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> |    \`-._\`-._        _.-&#39;_.-&#39;    |           https://redis.io</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  \`-._    \`-._\`-.__.-&#39;_.-&#39;    _.-&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-._</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">\`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-._</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-.__.-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;    _.-&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">_.-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;|</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> |    \`-._\`-._        _.-&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">_.-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;    |</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">  \`-._    \`-._\`-.__.-&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">_.-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;    _.-&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">      \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-._</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-.__.-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">&#39;    _.-&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">          \`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">-._</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        _.-&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">              \`-.__.-&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8621:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:12:32.682 </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8621:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:12:32.684 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Sentinel new configuration saved on disk</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8621:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:12:32.684 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Sentinel ID is af95d6a8f3bc17761be985c2a2151fc86ccf19fc</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8621:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:12:32.684 </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># +monitor master myredis 127.0.0.1 6001 quorum 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8621:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:12:32.684 </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># +monitor master mymaster 127.0.0.1 6379 quorum 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8621:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:12:32.684 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> +slave slave 127.0.0.1:6002 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6002</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> @ myredis </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8621:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:12:32.685 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Sentinel new configuration saved on disk</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8621:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:12:32.685 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> +slave slave 127.0.0.1:6003 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6003</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> @ myredis </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8621:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:12:32.685 </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Sentinel new configuration saved on disk</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8621:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:12:32.684</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> +slave</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> slave</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 127.0.0.1:6002</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6002</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> @</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> myredis</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">8621:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:12:32.685</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> +slave</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> slave</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 127.0.0.1:6003</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6003</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> @</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> myredis</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6001</span></span></code></pre></div><p>ä»ä¸Šé¢è¾“å…¥çš„ä¿¡æ¯å¯ä»¥çœ‹å‡º 6002ã€6003ä¸º Slaveï¼Œ6001ä¸ºMasterã€‚</p><h3 id="_5-æµ‹è¯•å“¨å…µ" tabindex="-1">5.æµ‹è¯•å“¨å…µ <a class="header-anchor" href="#_5-æµ‹è¯•å“¨å…µ" aria-label="Permalink to &quot;5.æµ‹è¯•å“¨å…µ&quot;">â€‹</a></h3><h4 id="_5-1-ä»æœºå®•æœº" tabindex="-1">5.1 ä»æœºå®•æœº <a class="header-anchor" href="#_5-1-ä»æœºå®•æœº" aria-label="Permalink to &quot;5.1 ä»æœºå®•æœº&quot;">â€‹</a></h4><p>kill ä»æœºçº¿ç¨‹</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[MichstaBe@localhost </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]$ ps -ef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> redis</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">polkitd</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    1732</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   1658</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 7æœˆ10</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">       00:00:01</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> redis-server</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:6379</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">       2501</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 7æœˆ10</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">       00:00:01</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/redis-server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 127.0.0.1:6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">       2534</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 7æœˆ10</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">       00:00:01</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/redis-server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 127.0.0.1:6002</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">       2556</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 7æœˆ10</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">       00:00:01</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/redis-server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 127.0.0.1:6003</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">       2637</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   2129</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 7æœˆ10</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pts/1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/redis-cli</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">       2639</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   2637</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 7æœˆ10</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pts/1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/redis-cli</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      10622</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   2066</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:18</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pts/0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/redis-sentinel</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:26379</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [sentinel]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Michsta+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  10844</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  10709</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:18</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pts/2</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --color=auto</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> redis</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[MichstaBe@localhost </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]$ sudo kill -s 9 2556</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[MichstaBe@localhost </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]$ ps -ef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> redis</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">polkitd</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    1732</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   1658</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 7æœˆ10</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">       00:00:01</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> redis-server</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:6379</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">       2501</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 7æœˆ10</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">       00:00:01</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/redis-server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 127.0.0.1:6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">       2534</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 7æœˆ10</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">       00:00:01</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/redis-server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 127.0.0.1:6002</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">       2637</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   2129</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 7æœˆ10</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pts/1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/redis-cli</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">       2639</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   2637</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 7æœˆ10</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pts/1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">   00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/redis-cli</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      11362</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   2066</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:19</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pts/0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/redis-sentinel</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:26379</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [sentinel]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Michsta+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  11746</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  10709</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:20</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pts/2</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --color=auto</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> redis</span></span></code></pre></div><p>sentinelè¾“å‡ºæ—¥å¿—:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:21:13.307</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # +sdown slave 127.0.0.1:6003 127.0.0.1 6003 @ myredis 127.0.0.1 6001</span></span></code></pre></div><p>é‡æ–°å¯åŠ¨ä»æœº:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[MichstaBe@localhost </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]$ ps -ef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> redis</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">polkitd</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">    1732</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   1658</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 7æœˆ10</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">       00:00:02</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> redis-server</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:6379</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">       2501</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 7æœˆ10</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">       00:00:02</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/redis-server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 127.0.0.1:6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">       2534</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 7æœˆ10</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">       00:00:02</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/redis-server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 127.0.0.1:6002</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      11362</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">   2066</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:19</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pts/0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/redis-sentinel</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:26379</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [sentinel]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      12672</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">      1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:23</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">        00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> bin/redis-server</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 127.0.0.1:6003</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">Michsta+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  12775</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  10709</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:23</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> pts/2</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">    00:00:00</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --color=auto</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> redis</span></span></code></pre></div><p>sentinel:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">1362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:23:23.126</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> +reboot</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> slave</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 127.0.0.1:6003</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6003</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> @</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> myredis</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:23:23.193</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # -sdown slave 127.0.0.1:6003 127.0.0.1 6003 @ myredis 127.0.0.1 6001</span></span></code></pre></div><p>æŸ¥çœ‹ä¸»ä»è¯¦æƒ…ï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">127.0.0.1:6001</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">info</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> replication</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># Replication</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">role:master</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">connected_slaves:2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">slave0:ip</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">=127.0.0.1,port=6002,state=online,offset=69689,lag=0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">slave1:ip</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">=127.0.0.1,port=6003,state=online,offset=69689,lag=0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">master_failover_state:no-failover</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">master_replid:0ff3808faa9869d0d2dddd5c58d39a029026107e</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">master_replid2:9b3a6e7e6d22a17a2f6e20efb0c6448d635eb777</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">master_repl_offset:69689</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">second_repl_offset:16661</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">repl_backlog_active:1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">repl_backlog_size:1048576</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">repl_backlog_first_byte_offset:16661</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">repl_backlog_histlen:53029</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">æ€»ç»“ğŸ˜</p><p>Slave å‡ºç°å®•æœºæƒ…å†µï¼Œä¸ä¼šå¹²æ¶‰å…¶ä»–æœåŠ¡è¿è¡Œã€‚å½“å®•æœºçš„ Slave ä»å®•æœºçŠ¶æ€å˜æˆæ­£å¸¸è¿è¡ŒçŠ¶æ€ï¼Œä¼šè‡ªåŠ¨è®¤ä¸»å½“å‰ Masterã€‚</p></div><h4 id="_5-2-ä¸»æœºå®•æœº" tabindex="-1">5.2 ä¸»æœºå®•æœº <a class="header-anchor" href="#_5-2-ä¸»æœºå®•æœº" aria-label="Permalink to &quot;5.2 ä¸»æœºå®•æœº&quot;">â€‹</a></h4><p>è¿›å…¥ä¸»æœºï¼Œæ‰§è¡Œ shutdown å‘½ä»¤ å…³é—­ä¸»æœºæœåŠ¡ï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">127.0.0.1:6001</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">shutdown</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">0.71s</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">not</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> connecte</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span></span></code></pre></div><p>sentinelè¾“å‡ºæ—¥å¿—ï¼š</p><ul><li>ç”±è¾“å‡ºæ—¥å¿—å¯ä»¥è§‚å¯Ÿå‡º 6001 å‡ºç°å®•æœºï¼Œå¹¶ä¸”æ‰§è¡Œ failover æ“ä½œï¼Œå°† Master è½¬ç§»ç»™äº† 6002ã€‚</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:25.601</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # +sdown master myredis 127.0.0.1 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:25.602</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # +odown master myredis 127.0.0.1 6001 #quorum 1/1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:25.602</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # +new-epoch 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:25.602</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # +try-failover master myredis 127.0.0.1 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:25.603</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Sentinel</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> new</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> configuration</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> saved</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disk</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:25.603</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # +vote-for-leader af95d6a8f3bc17761be985c2a2151fc86ccf19fc 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:25.603</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # +elected-leader master myredis 127.0.0.1 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:25.603</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # +failover-state-select-slave master myredis 127.0.0.1 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:25.664</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # +selected-slave slave 127.0.0.1:6002 127.0.0.1 6002 @ myredis 127.0.0.1 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:25.664</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> +failover-state-send-slaveof-noone</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> slave</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 127.0.0.1:6002</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6002</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> @</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> myredis</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:25.731</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> +failover-state-wait-promotion</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> slave</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 127.0.0.1:6002</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6002</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> @</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> myredis</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:26.636</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Sentinel</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> new</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> configuration</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> saved</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disk</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:26.636</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # +promoted-slave slave 127.0.0.1:6002 127.0.0.1 6002 @ myredis 127.0.0.1 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:26.636</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # +failover-state-reconf-slaves master myredis 127.0.0.1 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:26.737</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> +slave-reconf-sent</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> slave</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 127.0.0.1:6003</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6003</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> @</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> myredis</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:27.733</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> +slave-reconf-inprog</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> slave</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 127.0.0.1:6003</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6003</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> @</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> myredis</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:27.734</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> +slave-reconf-done</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> slave</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 127.0.0.1:6003</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6003</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> @</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> myredis</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:27.805</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # +failover-end master myredis 127.0.0.1 6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:27.805</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # +switch-master myredis 127.0.0.1 6001 127.0.0.1 6002</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:27.805</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> +slave</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> slave</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 127.0.0.1:6003</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6003</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> @</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> myredis</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6002</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:27.805</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> +slave</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> slave</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 127.0.0.1:6001</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6001</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> @</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> myredis</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6002</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:27.806</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Sentinel</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> new</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> configuration</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> saved</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> disk</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:31:57.867</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> # +sdown slave 127.0.0.1:6001 127.0.0.1 6001 @ myredis 127.0.0.1 6002</span></span></code></pre></div><p>æŸ¥çœ‹å½“å‰ä¸»ä»å…³ç³»ï¼š</p><ul><li>å¯ä»¥çœ‹å¾—å‡ºæ¥ï¼Œå½“å‰6002åªæœ‰ä¸€å° slaveï¼Œè¿™å°slaveçš„ç«¯å£æ˜¯6003ã€‚</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">127.0.0.1:6002</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">info</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> replication</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># Replication</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">role:master</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">connected_slaves:1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">slave0:ip</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">=127.0.0.1,port=6003,state=online,offset=91053,lag=0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">master_failover_state:no-failover</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">master_replid:daa140a0ae602200902b3d67145666bfeefd7c59</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">master_replid2:0ff3808faa9869d0d2dddd5c58d39a029026107e</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">master_repl_offset:91053</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">second_repl_offset:90357</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">repl_backlog_active:1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">repl_backlog_size:1048576</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">repl_backlog_first_byte_offset:16661</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">repl_backlog_histlen:74393</span></span></code></pre></div><p>å¯åŠ¨6001:</p><ul><li>sentinelè¾“å‡ºä¸‹é¢è¯­å¥ï¼Œè¡¨ç¤º6001ä»¥ä»æœºèº«ä»½è¿æ¥åˆ°ä¸»æœº6002ã€‚</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">11362:X</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> Jul</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2024</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 00:38:19.081</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> +convert-to-slave</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> slave</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> 127.0.0.1:6001</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6001</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> @</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> myredis</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 127.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 6002</span></span></code></pre></div><p>æŸ¥çœ‹å½“å‰ä¸»ä»å…³ç³»:</p><ul><li>ç”±æ—¥å¿—ä¿¡æ¯èƒ½å¤Ÿçœ‹å‡ºï¼Œå½“å‰6002ä¸»æœºæ‹¥æœ‰ä¸¤å°ä»æœºï¼Œç«¯å£åˆ†åˆ«æ˜¯6001ã€6003ã€‚</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">127.0.0.1:6002</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt; </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">info</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> replication</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># Replication</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">role:master</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">connected_slaves:2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">slave0:ip</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">=127.0.0.1,port=6003,state=online,offset=123428,lag=1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">slave1:ip</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">=127.0.0.1,port=6001,state=online,offset=123428,lag=1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">master_failover_state:no-failover</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">master_replid:daa140a0ae602200902b3d67145666bfeefd7c59</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">master_replid2:0ff3808faa9869d0d2dddd5c58d39a029026107e</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">master_repl_offset:123428</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">second_repl_offset:90357</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">repl_backlog_active:1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">repl_backlog_size:1048576</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">repl_backlog_first_byte_offset:16661</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">repl_backlog_histlen:106768</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">æ€»ç»“ğŸ˜</p><p>å¦‚æœä¸»æœºå‡ºç°å®•æœºï¼Œç»è¿‡å“¨å…µå‘é€çš„å¿ƒè·³åŒ…ï¼Œæ£€æµ‹åˆ°ä¸»æœºç¡®å®å®•æœºï¼Œé‚£ä¹ˆå“¨å…µå°†ä¼šè¿›è¡Œé€‰ä¸¾æŠ•ç¥¨ã€‚ä»å­˜æ´»çš„ä»æœºé‡ŒæŠ•ç¥¨é€‰ä¸¾ä¸€ä¸ªä¸»æœºå‡ºæ¥ã€‚å¦‚æœæ•…éšœè½¬ç§»å®Œæˆï¼ŒåŸä¸»æœºé‡æ–°æ­£å¸¸è¿è¡Œï¼Œé‚£ä¹ˆåŸä¸»æœºä¼šä»¥ä»æœºçš„èº«ä»½è¿æ¥åˆ°æ–°çš„ä¸»æœºã€‚</p></div>`,63);function m(s,u,v,b,f,_){const l=t,k=e("ClientOnly");return h(),F("div",null,[c,r(k,null,{default:d(()=>{var i,a;return[(((i=s.$frontmatter)==null?void 0:i.aside)??!0)&&(((a=s.$frontmatter)==null?void 0:a.showArticleMetadata)??!0)?(h(),y(l,{key:0,article:s.$frontmatter},null,8,["article"])):D("",!0)]}),_:1}),B])}const x=p(o,[["render",m]]);export{q as __pageData,x as default};
